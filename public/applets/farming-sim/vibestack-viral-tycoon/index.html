<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeStack: Viral Tycoon</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00ffff;
            --neon-purple: #bc13fe;
            --bg-dark: #0f0518;
            --glass: rgba(255, 255, 255, 0.1);
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            background-image: 
                linear-gradient(45deg, #1a0b2e 25%, transparent 25%, transparent 75%, #1a0b2e 75%, #1a0b2e),
                linear-gradient(45deg, #1a0b2e 25%, transparent 25%, transparent 75%, #1a0b2e 75%, #1a0b2e);
            background-size: 40px 40px;
            background-position: 0 0, 20px 20px;
            font-family: 'VT323', monospace;
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* UI Overlay */
        .ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--neon-cyan);
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px var(--neon-cyan);
            pointer-events: auto;
        }

        .stat-box {
            text-align: center;
        }
        .stat-label { color: var(--neon-pink); font-size: 1.2rem; }
        .stat-value { font-size: 2rem; text-shadow: 2px 2px 0px #000; }

        .feed-container {
            position: absolute;
            top: 100px;
            right: 20px;
            width: 250px;
            height: 300px;
            overflow-y: hidden;
            display: flex;
            flex-direction: column-reverse;
            pointer-events: none;
        }

        .chat-bubble {
            background: white;
            color: black;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            font-size: 1.1rem;
            position: relative;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 5px 5px 0px var(--neon-purple);
            opacity: 0.9;
        }
        .chat-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 20px;
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: white transparent;
        }

        /* Game Area */
        .game-stage {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            perspective: 1000px;
        }

        /* The Phone Stack Hoverboard */
        .hover-stack {
            position: relative;
            width: 200px;
            height: 300px;
            transform-style: preserve-3d;
            animation: hoverFloat 3s ease-in-out infinite;
            cursor: pointer;
            pointer-events: auto;
            transition: transform 0.1s;
        }

        .hover-stack:active {
            transform: scale(0.95) rotateX(10deg);
        }

        .character {
            position: absolute;
            top: -120px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 100px;
            z-index: 20;
            filter: drop-shadow(0 0 10px var(--neon-pink));
        }
        
        .trophy {
            position: absolute;
            top: -100px;
            left: -40px;
            font-size: 60px;
            z-index: 21;
            animation: wobble 2s infinite;
            display: none; /* Hidden until unlocked */
        }

        .phone-slab {
            position: absolute;
            width: 180px;
            height: 20px;
            background: #333;
            border-radius: 10px;
            border: 2px solid var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
            left: 10px;
            transition: all 0.3s;
        }

        /* Generate stack positions via CSS for the base ones */
        .phone-slab:nth-child(1) { bottom: 0px; background: #111; z-index: 5; }
        .phone-slab:nth-child(2) { bottom: 25px; background: #222; z-index: 6; }
        .phone-slab:nth-child(3) { bottom: 50px; background: #1a1a1a; z-index: 7; }
        .phone-slab:nth-child(4) { bottom: 75px; background: #000; border-color: var(--neon-pink); box-shadow: 0 0 15px var(--neon-pink); z-index: 8; }
        
        /* Top phone screen glow */
        .phone-slab:nth-child(4)::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, var(--neon-purple), var(--neon-cyan));
            opacity: 0.5;
            border-radius: 8px;
            animation: screenPulse 2s infinite;
        }

        /* Upgrades Panel */
        .upgrades-panel {
            background: rgba(0,0,0,0.9);
            border-top: 4px solid var(--neon-purple);
            height: 220px;
            width: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
            pointer-events: auto;
            display: flex;
            overflow-x: auto;
            padding: 10px;
            gap: 15px;
            z-index: 200;
        }

        .upgrade-card {
            min-width: 140px;
            height: 180px;
            background: #2a1a3a;
            border: 2px solid #4a2a6a;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .upgrade-card:hover {
            border-color: var(--neon-pink);
            transform: translateY(-5px);
            box-shadow: 0 0 15px var(--neon-pink);
        }

        .upgrade-card.disabled {
            opacity: 0.5;
            filter: grayscale(1);
            cursor: not-allowed;
        }

        .upgrade-icon { font-size: 40px; margin-bottom: 5px; }
        .upgrade-name { font-size: 1.2rem; color: var(--neon-cyan); text-align: center; line-height: 1; }
        .upgrade-cost { font-size: 1rem; color: #fff; margin-top: 5px; }
        .upgrade-count { 
            position: absolute; top: 5px; right: 5px; 
            background: var(--neon-pink); color: white; 
            border-radius: 50%; width: 20px; height: 20px; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 0.8rem;
        }

        /* Floating Particles */
        .particle {
            position: absolute;
            pointer-events: none;
            animation: floatUp 1.5s ease-out forwards;
            font-weight: bold;
            text-shadow: 0 0 5px black;
            font-size: 1.5rem;
        }

        /* Animations */
        @keyframes hoverFloat {
            0%, 100% { transform: translateY(0px) rotateX(0deg); }
            50% { transform: translateY(-20px) rotateX(5deg); }
        }
        @keyframes screenPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
        }
        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes wobble {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        /* Background Decorations */
        .bg-deco {
            position: absolute;
            font-size: 150px;
            opacity: 0.1;
            z-index: 0;
            animation: bgFloat 10s infinite linear;
        }
        @keyframes bgFloat {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-20vh) rotate(360deg); }
        }

        /* Special Button */
        .fish-btn {
            position: absolute;
            bottom: 240px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #ff0055, #ff5500);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-family: 'VT323';
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 0 10px #ff0055;
            z-index: 150;
            animation: pulseBtn 1s infinite;
        }
        @keyframes pulseBtn {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }

    </style>
</head>
<body>

    <!-- Background Elements -->
    <div class="bg-deco" style="left: 10%; animation-duration: 15s;">üì±</div>
    <div class="bg-deco" style="left: 80%; animation-duration: 20s; animation-delay: 2s;">üî•</div>
    <div class="bg-deco" style="left: 30%; animation-duration: 12s; animation-delay: 5s;">ü§ñ</div>

    <!-- Game Scene -->
    <div class="game-stage">
        <div class="hover-stack" id="clickZone">
            <div class="character">üòé<div class="trophy" id="trophy">üèÜ</div></div>
            <!-- Phone Stack -->
            <div class="phone-slab"></div>
            <div class="phone-slab"></div>
            <div class="phone-slab"></div>
            <div class="phone-slab"></div> <!-- Top Phone -->
        </div>
    </div>

    <!-- UI Layer -->
    <div class="ui-layer">
        <div class="header">
            <div class="stat-box">
                <div class="stat-label">VIBES</div>
                <div class="stat-value" id="vibesDisplay">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">CLOUT/SEC</div>
                <div class="stat-value" id="cpsDisplay">0</div>
            </div>
        </div>

        <div class="feed-container" id="feed">
            <!-- Chat bubbles appear here -->
        </div>
    </div>

    <button class="fish-btn" id="fishBtn">Drop a üê† if you agree?</button>

    <!-- Upgrades -->
    <div class="upgrades-panel" id="upgradesContainer">
        <!-- Generated by JS -->
    </div>

    <script>
        // Game State
        const state = {
            vibes: 0,
            vibesPerClick: 1,
            vibesPerSecond: 0,
            clickCount: 0,
            unlocks: {
                trophy: false
            }
        };

        // Configuration
        const upgrades = [
            { id: 'bot', name: 'AI Bot Army', icon: 'ü§ñ', baseCost: 15, cps: 1, count: 0 },
            { id: 'wifi', name: '5G Signal', icon: 'üì∂', baseCost: 100, cps: 5, count: 0 },
            { id: 'cat', name: 'Viral Cat', icon: 'üê±', baseCost: 500, cps: 20, count: 0 },
            { id: 'toaster', name: 'Smart Toaster', icon: 'üçû', baseCost: 2000, cps: 50, count: 0 },
            { id: 'throne', name: 'TikTok Throne', icon: 'üí∫', baseCost: 10000, cps: 200, count: 0 },
            { id: 'grok', name: 'Grok AI', icon: 'üß†', baseCost: 50000, cps: 1000, count: 0 }
        ];

        const phrases = [
            "#VibesOnly",
            "Grok is smarter than u",
            "Ratio + L",
            "Algorithm God",
            "Drop a üê†",
            "Thought Leader",
            "AI BFF",
            "To the moon! üöÄ",
            "Main Character Energy",
            "Slay ‚ú®"
        ];

        const colors = ['#ff00ff', '#00ffff', '#ffff00', '#ff0055'];

        // DOM Elements
        const vibesDisplay = document.getElementById('vibesDisplay');
        const cpsDisplay = document.getElementById('cpsDisplay');
        const clickZone = document.getElementById('clickZone');
        const feed = document.getElementById('feed');
        const upgradesContainer = document.getElementById('upgradesContainer');
        const trophy = document.getElementById('trophy');
        const fishBtn = document.getElementById('fishBtn');

        // Initialization
        function init() {
            renderUpgrades();
            gameLoop();
            
            // Click Handler
            clickZone.addEventListener('mousedown', (e) => {
                handleInteraction(e.clientX, e.clientY);
            });
            
            // Touch Handler
            clickZone.addEventListener('touchstart', (e) => {
                e.preventDefault(); // Prevent scrolling
                const touch = e.touches[0];
                handleInteraction(touch.clientX, touch.clientY);
            });

            fishBtn.addEventListener('click', () => {
                spawnParticle(window.innerWidth/2, window.innerHeight - 300, "üê† +100 VIBES");
                state.vibes += 100;
                updateUI();
                addFeedMessage("You dropped a üê†!");
                fishBtn.style.display = 'none';
                setTimeout(() => fishBtn.style.display = 'block', 10000); // Cooldown
            });
        }

        function handleInteraction(x, y) {
            state.vibes += state.vibesPerClick;
            state.clickCount++;
            spawnParticle(x, y, `+${state.vibesPerClick}`);
            updateUI();
            
            // Random chance to chat
            if (Math.random() > 0.8) {
                addFeedMessage(phrases[Math.floor(Math.random() * phrases.length)]);
            }

            // Visual Stack Effect
            if (state.clickCount % 10 === 0) {
                addPhoneToStack();
            }
        }

        // Core Logic
        function updateUI() {
            vibesDisplay.innerText = Math.floor(state.vibes).toLocaleString();
            cpsDisplay.innerText = state.vibesPerSecond.toLocaleString();
            
            // Update Upgrade Buttons
            upgrades.forEach(u => {
                const el = document.getElementById(`upg-${u.id}`);
                const cost = Math.floor(u.baseCost * Math.pow(1.15, u.count));
                
                if (state.vibes >= cost) {
                    el.classList.remove('disabled');
                } else {
                    el.classList.add('disabled');
                }
            });

            // Unlocks
            if (state.vibesPerSecond > 100 && !state.unlocks.trophy) {
                state.unlocks.trophy = true;
                trophy.style.display = 'block';
                addFeedMessage("üèÜ Trophy Unlocked!");
            }
        }

        function gameLoop() {
            setInterval(() => {
                if (state.vibesPerSecond > 0) {
                    state.vibes += state.vibesPerSecond / 10; // Update 10 times a second
                    updateUI();
                }
            }, 100);

            // Random events
            setInterval(() => {
                if (state.vibesPerSecond > 0) {
                    // Auto spawn particles for visual flair
                    const rect = clickZone.getBoundingClientRect();
                    const x = rect.left + Math.random() * rect.width;
                    const y = rect.top + Math.random() * rect.height;
                    spawnParticle(x, y, "‚ù§Ô∏è");
                }
            }, 2000);
        }

        // Visuals
        function spawnParticle(x, y, text) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = text;
            p.style.left = `${x}px`;
            p.style.top = `${y}px`;
            p.style.color = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(p);
            
            setTimeout(() => p.remove(), 1500);
        }

        function addFeedMessage(text) {
            const msg = document.createElement('div');
            msg.className = 'chat-bubble';
            msg.innerText = text;
            feed.prepend(msg);
            
            if (feed.children.length > 5) {
                feed.lastElementChild.remove();
            }
        }

        function addPhoneToStack() {
            // Visually add more phones to the stack up to a limit
            const currentPhones = document.querySelectorAll('.phone-slab').length;
            if (currentPhones < 12) {
                const newPhone = document.createElement('div');
                newPhone.className = 'phone-slab';
                newPhone.style.bottom = `${currentPhones * 25}px`;
                newPhone.style.zIndex = currentPhones + 5;
                newPhone.style.background = '#222';
                
                // Insert before the top phone (which is usually the last child)
                // Actually, let's just append it and adjust z-indexes dynamically or keep it simple
                // Simplification: Just change the character height
                const char = document.querySelector('.character');
                const currentTop = parseInt(window.getComputedStyle(char).top);
                char.style.top = `${currentTop - 25}px`;
                
                const stack = document.querySelector('.hover-stack');
                stack.insertBefore(newPhone, stack.children[stack.children.length - 1]);
            }
        }

        // Upgrades System
        function renderUpgrades() {
            upgradesContainer.innerHTML = '';
            upgrades.forEach(u => {
                const card = document.createElement('div');
                card.className = 'upgrade-card disabled';
                card.id = `upg-${u.id}`;
                
                // Calculate cost
                const cost = Math.floor(u.baseCost * Math.pow(1.15, u.count));

                card.innerHTML = `
                    <div class="upgrade-count">${u.count}</div>
                    <div class="upgrade-icon">${u.icon}</div>
                    <div class="upgrade-name">${u.name}</div>
                    <div class="upgrade-cost">${cost} Vibes</div>
                `;

                card.addEventListener('click', () => buyUpgrade(u));
                upgradesContainer.appendChild(card);
            });
        }

        function buyUpgrade(upgrade) {
            const cost = Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.count));
            if (state.vibes >= cost) {
                state.vibes -= cost;
                upgrade.count++;
                state.vibesPerSecond += upgrade.cps;
                
                // Visual feedback
                spawnParticle(window.innerWidth/2, window.innerHeight - 200, `+${upgrade.cps} CPS`);
                addFeedMessage(`Bought ${upgrade.name}!`);
                
                renderUpgrades(); // Re-render to update costs
                updateUI();
            }
        }

        // Start
        init();

    </script>
</body>
</html>