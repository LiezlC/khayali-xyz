<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Convergence Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap');

        body {
            background-color: #0f172a;
            color: #e2e8f0;
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Background Atmosphere */
        .bg-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 30% 50%, rgba(236, 72, 153, 0.15), transparent 50%),
                        radial-gradient(circle at 70% 50%, rgba(6, 182, 212, 0.15), transparent 50%);
            animation: pulse-bg 10s infinite alternate;
        }

        @keyframes pulse-bg {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        /* UI Elements */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .slider-track {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: #334155;
            border-radius: 3px;
            outline: none;
            opacity: 0.8;
            transition: opacity .2s;
        }

        .slider-track:hover { opacity: 1; }

        .slider-track::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ec4899;
            cursor: pointer;
            box-shadow: 0 0 10px #ec4899;
        }

        .ai-indicator {
            height: 6px;
            border-radius: 3px;
            background: #06b6d4;
            box-shadow: 0 0 8px #06b6d4;
            transition: width 0.5s ease-out;
        }

        /* Face Animations */
        .face-container {
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .organic-face {
            filter: drop-shadow(0 0 15px rgba(236, 72, 153, 0.4));
            animation: breathe 6s infinite ease-in-out;
        }

        .mech-face {
            filter: drop-shadow(0 0 15px rgba(6, 182, 212, 0.4));
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 10px white;
            animation: scan 3s linear infinite;
            opacity: 0;
        }

        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* Connection Particles */
        .particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        .crt-overlay {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <!-- Background Effects -->
    <div class="bg-glow"></div>
    <div class="crt-overlay absolute inset-0 z-50"></div>

    <!-- Header -->
    <header class="absolute top-0 w-full p-6 flex justify-between items-center z-40">
        <div class="text-pink-400 font-bold tracking-widest text-xl font-['Orbitron']">ORGANIC<span class="text-white text-xs ml-2 opacity-50">HOST</span></div>
        <div class="text-center">
            <h1 class="text-white font-['Orbitron'] tracking-[0.5em] text-sm md:text-xl uppercase">Neural Synchronization</h1>
            <div id="status-text" class="text-xs text-cyan-400 mt-1 animate-pulse">WAITING FOR INPUT...</div>
        </div>
        <div class="text-cyan-400 font-bold tracking-widest text-xl font-['Orbitron'] text-right"><span class="text-white text-xs mr-2 opacity-50">SYNTHETIC</span>UNIT</div>
    </header>

    <!-- Main Visual Stage -->
    <main class="flex-grow flex items-center justify-center relative z-10">
        
        <!-- Connection Visualizer (Center) -->
        <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
            <div id="synapse-core" class="w-1 h-1 bg-white rounded-full shadow-[0_0_20px_10px_rgba(255,255,255,0.5)] opacity-0 transition-all duration-1000"></div>
            <div id="particles-container" class="absolute inset-0"></div>
        </div>

        <!-- Faces Container -->
        <div class="flex items-center justify-center w-full max-w-4xl h-96 relative">
            
            <!-- Left Face (Organic) -->
            <div id="face-left" class="face-container w-1/2 h-full flex justify-end items-center pr-2 md:pr-8 transition-all duration-700" style="transform: translateX(-50px);">
                <svg viewBox="0 0 200 300" class="h-full w-auto organic-face opacity-80">
                    <defs>
                        <linearGradient id="grad-organic" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#f9a8d4;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#db2777;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <!-- Stylized Profile Silhouette -->
                    <path d="M100,50 C60,50 40,80 40,120 C40,150 50,170 60,180 C70,190 75,200 70,220 C65,240 40,260 20,280 L180,280 L180,50 Z" fill="url(#grad-organic)" />
                    <!-- Eye Detail -->
                    <path d="M90,115 Q110,110 130,118" stroke="#831843" stroke-width="2" fill="none" opacity="0.5"/>
                    <circle cx="110" cy="120" r="3" fill="#831843" opacity="0.5"/>
                    <!-- Lips -->
                    <path d="M130,190 Q140,195 130,205" stroke="#831843" stroke-width="2" fill="none" opacity="0.4"/>
                </svg>
            </div>

            <!-- Right Face (Robotic) -->
            <div id="face-right" class="face-container w-1/2 h-full flex justify-start items-center pl-2 md:pl-8 transition-all duration-700" style="transform: translateX(50px);">
                <svg viewBox="0 0 200 300" class="h-full w-auto mech-face opacity-80" style="transform: scaleX(-1);">
                    <defs>
                        <linearGradient id="grad-mech" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#a5f3fc;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#0891b2;stop-opacity:1" />
                        </linearGradient>
                        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                            <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
                        </pattern>
                    </defs>
                    <!-- Stylized Profile Silhouette -->
                    <path d="M100,50 C60,50 40,80 40,120 C40,150 50,170 60,180 C70,190 75,200 70,220 C65,240 40,260 20,280 L180,280 L180,50 Z" fill="url(#grad-mech)" />
                    <!-- Tech Overlays -->
                    <path d="M100,50 C60,50 40,80 40,120 C40,150 50,170 60,180 C70,190 75,200 70,220 C65,240 40,260 20,280 L180,280 L180,50 Z" fill="url(#grid)" />
                    <!-- Panel Lines -->
                    <path d="M60,50 L60,100 L90,120" stroke="white" stroke-width="1" fill="none" opacity="0.6"/>
                    <circle cx="80" cy="90" r="5" stroke="white" stroke-width="1" fill="none"/>
                    <path d="M50,160 L100,160 L120,200" stroke="white" stroke-width="1" fill="none" opacity="0.6"/>
                    <!-- Eye Glow -->
                    <circle cx="110" cy="120" r="4" fill="#00ffff" class="animate-pulse">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite" />
                    </circle>
                </svg>
                <div class="scan-line"></div>
            </div>

        </div>
    </main>

    <!-- Control Dashboard -->
    <footer class="relative z-40 p-6 pb-10">
        <div class="max-w-3xl mx-auto glass-panel rounded-2xl p-6">
            
            <div class="flex justify-between mb-4 text-xs font-bold tracking-widest text-slate-400 uppercase">
                <span>Manual Override</span>
                <span>Auto-Calibration Target</span>
            </div>

            <!-- Control 1: Empathy/Logic -->
            <div class="mb-6 relative group">
                <div class="flex justify-between mb-1">
                    <label class="text-pink-300 text-sm font-semibold">EMOTIONAL RESONANCE</label>
                    <span id="val-1" class="text-white font-mono">0%</span>
                </div>
                <!-- AI Target Bar -->
                <div class="w-full bg-slate-800 h-2 rounded-full mb-2 overflow-hidden relative">
                    <div id="target-1" class="ai-indicator absolute top-0 h-full w-10 opacity-50 animate-pulse" style="left: 30%"></div>
                </div>
                <!-- User Input -->
                <input type="range" min="0" max="100" value="0" class="slider-track" id="input-1">
            </div>

            <!-- Control 2: Frequency -->
            <div class="mb-6 relative group">
                <div class="flex justify-between mb-1">
                    <label class="text-purple-300 text-sm font-semibold">NEURAL FREQUENCY</label>
                    <span id="val-2" class="text-white font-mono">0 Hz</span>
                </div>
                <div class="w-full bg-slate-800 h-2 rounded-full mb-2 overflow-hidden relative">
                    <div id="target-2" class="ai-indicator absolute top-0 h-full w-10 opacity-50 animate-pulse" style="left: 60%"></div>
                </div>
                <input type="range" min="0" max="100" value="0" class="slider-track" id="input-2" style="accent-color: #a855f7;">
                <style>#input-2::-webkit-slider-thumb { background: #a855f7; box-shadow: 0 0 10px #a855f7; }</style>
            </div>

            <!-- Control 3: Amplitude -->
            <div class="relative group">
                <div class="flex justify-between mb-1">
                    <label class="text-cyan-300 text-sm font-semibold">LOGIC AMPLITUDE</label>
                    <span id="val-3" class="text-white font-mono">0 dB</span>
                </div>
                <div class="w-full bg-slate-800 h-2 rounded-full mb-2 overflow-hidden relative">
                    <div id="target-3" class="ai-indicator absolute top-0 h-full w-10 opacity-50 animate-pulse" style="left: 10%"></div>
                </div>
                <input type="range" min="0" max="100" value="0" class="slider-track" id="input-3" style="accent-color: #06b6d4;">
                <style>#input-3::-webkit-slider-thumb { background: #06b6d4; box-shadow: 0 0 10px #06b6d4; }</style>
            </div>

            <!-- Sync Meter -->
            <div class="mt-6 pt-4 border-t border-slate-700 flex items-center gap-4">
                <div class="text-xs text-slate-400 uppercase whitespace-nowrap">Total Sync</div>
                <div class="w-full bg-slate-900 h-4 rounded-full overflow-hidden border border-slate-700">
                    <div id="sync-bar" class="h-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 w-0 transition-all duration-300"></div>
                </div>
                <div id="sync-percent" class="text-lg font-bold font-mono text-white w-16 text-right">0%</div>
            </div>
        </div>
    </footer>

    <script>
        // Game State
        const state = {
            targets: [50, 50, 50], // The AI's fluctuating values
            inputs: [0, 0, 0],     // The user's slider values
            sync: 0,               // Current synchronization percentage
            isComplete: false
        };

        // DOM Elements
        const inputs = [
            document.getElementById('input-1'),
            document.getElementById('input-2'),
            document.getElementById('input-3')
        ];
        const targets = [
            document.getElementById('target-1'),
            document.getElementById('target-2'),
            document.getElementById('target-3')
        ];
        const labels = [
            document.getElementById('val-1'),
            document.getElementById('val-2'),
            document.getElementById('val-3')
        ];
        const syncBar = document.getElementById('sync-bar');
        const syncText = document.getElementById('sync-percent');
        const statusText = document.getElementById('status-text');
        const faceLeft = document.getElementById('face-left');
        const faceRight = document.getElementById('face-right');
        const synapseCore = document.getElementById('synapse-core');

        // Initialize random targets
        function randomizeTarget(index) {
            if(state.isComplete) return;
            // Move target smoothly
            const newValue = Math.floor(Math.random() * 80) + 10;
            state.targets[index] = newValue;
            targets[index].style.left = `${newValue}%`;
            
            // Schedule next move
            setTimeout(() => randomizeTarget(index), Math.random() * 2000 + 2000);
        }

        // Start AI fluctuation
        [0, 1, 2].forEach(i => randomizeTarget(i));

        // Input Event Listeners
        inputs.forEach((input, idx) => {
            input.addEventListener('input', (e) => {
                state.inputs[idx] = parseInt(e.target.value);
                updateUI();
            });
        });

        function updateUI() {
            // Update text labels
            labels[0].innerText = `${state.inputs[0]}%`;
            labels[1].innerText = `${state.inputs[1]} Hz`;
            labels[2].innerText = `${state.inputs[2]} dB`;

            calculateSync();
        }

        function calculateSync() {
            if(state.isComplete) return;

            let totalDiff = 0;
            for(let i=0; i<3; i++) {
                // Calculate distance between input (0-100) and target (0-100)
                // We account for the width of the target bar (approx 10%)
                let diff = Math.abs(state.inputs[i] - (state.targets[i] + 5)); // +5 to center on the bar
                if (diff < 10) diff = 0; // "Snap" to perfect if close enough
                totalDiff += diff;
            }

            // Calculate sync percentage (lower diff = higher sync)
            // Max possible diff approx 300. 
            let sync = Math.max(0, 100 - (totalDiff / 1.5));
            state.sync = Math.floor(sync);

            // Update Sync Bar
            syncBar.style.width = `${state.sync}%`;
            syncText.innerText = `${state.sync}%`;

            // Visual Feedback based on Sync
            updateVisuals(state.sync);

            // Win Condition
            if (state.sync >= 98) {
                triggerSingularity();
            }
        }

        function updateVisuals(sync) {
            // Move faces closer based on sync
            // Range: -50px (far) to 0px (touching)
            const distance = 50 - (sync / 2);
            faceLeft.style.transform = `translateX(-${distance}px)`;
            faceRight.style.transform = `translateX(${distance}px)`;

            // Opacity of faces increases
            const opacity = 0.5 + (sync / 200);
            faceLeft.querySelector('svg').style.opacity = opacity;
            faceRight.querySelector('svg').style.opacity = opacity;

            // Status Text
            if (sync < 30) {
                statusText.innerText = "SIGNAL WEAK - ADJUST PARAMETERS";
                statusText.className = "text-xs text-red-400 mt-1 animate-pulse";
            } else if (sync < 70) {
                statusText.innerText = "CALIBRATING NEURAL PATHWAYS...";
                statusText.className = "text-xs text-yellow-400 mt-1";
            } else {
                statusText.innerText = "RESONANCE DETECTED - HOLD STEADY";
                statusText.className = "text-xs text-cyan-400 mt-1 animate-pulse";
            }

            // Core glow
            if (sync > 80) {
                synapseCore.style.opacity = (sync - 80) / 20;
                synapseCore.style.transform = `scale(${(sync - 80) / 5})`;
            } else {
                synapseCore.style.opacity = 0;
            }
        }

        function triggerSingularity() {
            if (state.isComplete) return;
            state.isComplete = true;

            statusText.innerText = "SINGULARITY ACHIEVED";
            statusText.className = "text-xl text-white font-bold mt-1 tracking-widest animate-bounce";
            
            // Lock inputs
            inputs.forEach(i => i.disabled = true);

            // Visual Finale
            faceLeft.style.transform = `translateX(10px)`;
            faceRight.style.transform = `translateX(-10px)`;
            
            synapseCore.style.transition = "all 2s ease-in";
            synapseCore.style.transform = "scale(500)";
            synapseCore.style.opacity = "1";
            synapseCore.style.background = "white";

            setTimeout(() => {
                document.body.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-screen w-full bg-white text-black animate-fade-in">
                        <h1 class="text-4xl md:text-6xl font-['Orbitron'] font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-500">ONE MIND</h1>
                        <p class="font-['Rajdhani'] text-xl tracking-widest">HUMAN-AI INTEGRATION COMPLETE</p>
                        <button onclick="location.reload()" class="mt-8 px-6 py-2 border border-black hover:bg-black hover:text-white transition-colors font-mono">RESET SYSTEM</button>
                    </div>
                    <style>
                        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                        .animate-fade-in { animation: fade-in 2s forwards; }
                    </style>
                `;
            }, 2500);
        }

        // Particle System
        function createParticle() {
            if (state.sync < 20) return; // Only show particles if some connection exists

            const container = document.getElementById('particles-container');
            const p = document.createElement('div');
            p.classList.add('particle');
            
            // Random position near center
            const startY = Math.random() * 100 + 100; // middle height
            const startX = 50 + (Math.random() * 20 - 10); // Center X
            
            p.style.left = '50%';
            p.style.top = '50%';
            
            // Size based on sync
            const size = Math.random() * 3 + 1;
            p.style.width = `${size}px`;
            p.style.height = `${size}px`;
            
            // Color based on direction (Pink -> Blue or Blue -> Pink)
            const isHumanToAI = Math.random() > 0.5;
            p.style.background = isHumanToAI ? '#ec4899' : '#06b6d4';
            
            container.appendChild(p);

            // Animation
            const destX = isHumanToAI ? 100 : -100; // Move left or right
            const duration = Math.random() * 1000 + 500;

            const animation = p.animate([
                { transform: 'translate(0, 0) scale(0)', opacity: 1 },
                { transform: `translate(${destX}px, ${Math.random() * 40 - 20}px) scale(0)`, opacity: 0 }
            ], {
                duration: duration,
                easing: 'ease-out'
            });

            animation.onfinish = () => p.remove();
        }

        setInterval(createParticle, 100); // Constant particle generation

    </script>
</body>
</html>