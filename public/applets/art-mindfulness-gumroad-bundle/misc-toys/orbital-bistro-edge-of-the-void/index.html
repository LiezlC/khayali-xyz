<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbital Bistro: Edge of the Void</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600&display=swap');

        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            font-family: 'Rajdhani', sans-serif;
            color: white;
            user-select: none;
        }

        /* --- SCENE LAYOUT --- */
        #scene-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
        }

        /* --- THE VOID (LEFT) --- */
        #void-view {
            flex: 1.5;
            position: relative;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            overflow: hidden;
            z-index: 1;
        }

        /* Clouds/Mist */
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            filter: blur(40px);
            animation: drift 60s linear infinite;
        }

        @keyframes drift {
            from { transform: translateX(-100%); }
            to { transform: translateX(100vw); }
        }

        /* The Big Ship */
        #capital-ship {
            position: absolute;
            top: 20%;
            left: -10%;
            width: 600px;
            height: 200px;
            filter: drop-shadow(0px 10px 20px rgba(0,0,0,0.5));
            animation: hoverShip 8s ease-in-out infinite;
            z-index: 10;
            cursor: pointer;
            transition: transform 0.3s;
        }
        #capital-ship:hover {
            transform: scale(1.02);
        }

        @keyframes hoverShip {
            0%, 100% { transform: translateY(0) rotate(2deg); }
            50% { transform: translateY(-20px) rotate(0deg); }
        }

        /* --- THE INTERIOR (RIGHT) --- */
        #interior {
            flex: 1;
            position: relative;
            background: linear-gradient(to right, #1a1a1a, #0a0a0a);
            border-left: 20px solid #2a2a2a;
            box-shadow: -10px 0 50px rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            z-index: 20;
        }

        /* The Portal Window */
        #portal-window {
            position: absolute;
            top: 10%;
            right: 10%;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle at center, #ffdd00, #ff8800, #550000);
            box-shadow: 
                inset 0 0 50px #000,
                0 0 20px rgba(255, 100, 0, 0.3);
            border: 15px solid #222;
            overflow: hidden;
        }

        .portal-particle {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            opacity: 0.8;
        }

        /* Dining Area */
        #dining-area {
            position: relative;
            width: 100%;
            height: 50%;
            background: #111;
            border-top: 2px solid #333;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 800px;
        }

        #table {
            width: 250px;
            height: 250px;
            background: #eee;
            border-radius: 50%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            position: relative;
            transform: rotateX(20deg);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 30;
        }

        /* Table Cloth Texture */
        #table::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0,0,0,0.05) 20%, transparent 20%), rgba(255,255,255,1);
            background-size: 20px 20px;
            opacity: 0.5;
        }

        .guest {
            position: absolute;
            width: 60px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .guest-bubble {
            position: absolute;
            top: -50px;
            background: white;
            border-radius: 10px;
            padding: 5px 10px;
            font-size: 1.5rem;
            color: #333;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            pointer-events: none;
            z-index: 100;
        }
        .guest-bubble::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 5px 5px 0;
            border-style: solid;
            border-color: white transparent;
        }
        .guest-bubble.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Guest Positions */
        .g-1 { transform: translate(0, -160px); z-index: 25; } /* Top */
        .g-2 { transform: translate(140px, -50px); z-index: 26; } /* Right */
        .g-3 { transform: translate(90px, 100px); z-index: 35; } /* Bottom Right */
        .g-4 { transform: translate(-90px, 100px); z-index: 35; } /* Bottom Left */
        .g-5 { transform: translate(-140px, -50px); z-index: 26; } /* Left */

        /* UI Overlay */
        #ui-layer {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #444;
            padding: 15px;
            border-radius: 15px;
            display: flex;
            gap: 15px;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .food-btn {
            width: 60px;
            height: 60px;
            font-size: 2rem;
            background: #222;
            border: 2px solid #555;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.1s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .food-btn:hover {
            background: #333;
            border-color: #fff;
            transform: scale(1.1);
        }
        .food-btn:active {
            transform: scale(0.95);
        }

        #score-board {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #0ff;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            background: rgba(0,0,0,0.7);
            padding: 10px 20px;
            border-radius: 5px;
            border: 1px solid #0ff;
            z-index: 100;
        }

        #message-log {
            position: absolute;
            top: 80px;
            left: 20px;
            color: #aaa;
            font-size: 0.9rem;
            max-width: 300px;
            pointer-events: none;
            z-index: 100;
        }

        .log-entry {
            margin-bottom: 5px;
            opacity: 0.8;
            animation: fadeOut 5s forwards;
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            90% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* SVG Styles */
        .ship-body { fill: #cfd8dc; stroke: #546e7a; stroke-width: 2; }
        .ship-engine { fill: #455a64; }
        .ship-glow { fill: #00bcd4; filter: blur(5px); opacity: 0.6; }
        
        /* Small flyers in window */
        .flyer {
            position: absolute;
            font-size: 10px;
            color: #000;
            animation: flyAcross 10s linear infinite;
        }
        @keyframes flyAcross {
            0% { transform: translate(-50px, 50px) rotate(-10deg); }
            100% { transform: translate(350px, -100px) rotate(-10deg); }
        }

    </style>
</head>
<body>

<div id="scene-container">
    
    <!-- LEFT: THE VOID -->
    <div id="void-view">
        <!-- Clouds -->
        <div class="cloud" style="width: 400px; height: 200px; top: 60%; left: 10%;"></div>
        <div class="cloud" style="width: 600px; height: 300px; top: 70%; left: 40%;"></div>
        <div class="cloud" style="width: 300px; height: 150px; top: 50%; left: -10%;"></div>

        <!-- The Spaceship SVG -->
        <div id="capital-ship" onclick="scanShip()">
            <svg viewBox="0 0 600 200" xmlns="http://www.w3.org/2000/svg">
                <!-- Engine Glow -->
                <ellipse cx="80" cy="100" rx="20" ry="40" class="ship-glow" />
                <ellipse cx="80" cy="60" rx="15" ry="25" class="ship-glow" />
                <ellipse cx="80" cy="140" rx="15" ry="25" class="ship-glow" />
                
                <!-- Main Hull -->
                <path d="M100,60 L500,80 Q580,100 500,120 L100,140 Z" class="ship-body" />
                <rect x="60" y="80" width="60" height="40" rx="5" class="ship-engine" />
                <rect x="60" y="40" width="50" height="30" rx="5" class="ship-engine" />
                <rect x="60" y="130" width="50" height="30" rx="5" class="ship-engine" />
                
                <!-- Details -->
                <line x1="150" y1="80" x2="400" y2="80" stroke="#90a4ae" stroke-width="2" />
                <line x1="150" y1="120" x2="400" y2="120" stroke="#90a4ae" stroke-width="2" />
                <circle cx="450" cy="100" r="5" fill="#ef5350" />
            </svg>
        </div>
    </div>

    <!-- RIGHT: INTERIOR -->
    <div id="interior">
        <!-- Portal Window -->
        <div id="portal-window">
            <div class="flyer" style="top: 60%; left: -20%;">‚úàÔ∏è</div>
            <div class="flyer" style="top: 40%; left: -50%; animation-delay: 3s;">üöÄ</div>
        </div>

        <!-- Dining Area -->
        <div id="dining-area">
            <div id="table">
                <!-- Table Items -->
                <div style="font-size: 2rem; margin-top: -20px;">üïØÔ∏è</div>
            </div>

            <!-- Guests -->
            <div class="guest g-1" id="guest-0">
                <div class="guest-bubble" id="bubble-0">üçî</div>
                üë®‚ÄçüöÄ
            </div>
            <div class="guest g-2" id="guest-1">
                <div class="guest-bubble" id="bubble-1">üç∑</div>
                üë©‚ÄçüöÄ
            </div>
            <div class="guest g-3" id="guest-2">
                <div class="guest-bubble" id="bubble-2">ü•ó</div>
                ü§ñ
            </div>
            <div class="guest g-4" id="guest-3">
                <div class="guest-bubble" id="bubble-3">üëΩ</div>
                üëæ
            </div>
            <div class="guest g-5" id="guest-4">
                <div class="guest-bubble" id="bubble-4">üç∫</div>
                ü§µ
            </div>
        </div>
    </div>

    <!-- UI Elements -->
    <div id="score-board">CREDITS: <span id="score">0</span></div>
    <div id="message-log"></div>

    <div id="ui-layer">
        <div class="food-btn" onclick="serveItem('üçî')" title="Space Burger">üçî</div>
        <div class="food-btn" onclick="serveItem('üç∑')" title="Nebula Wine">üç∑</div>
        <div class="food-btn" onclick="serveItem('ü•ó')" title="Zero-G Salad">ü•ó</div>
        <div class="food-btn" onclick="serveItem('üç∫')" title="Comet Ale">üç∫</div>
        <div class="food-btn" onclick="serveItem('üç∞')" title="Moon Cake">üç∞</div>
    </div>

</div>

<script>
    // --- GAME STATE ---
    let score = 0;
    const guests = [
        { id: 0, type: 'üë®‚ÄçüöÄ', desired: null, timer: null, patience: 100 },
        { id: 1, type: 'üë©‚ÄçüöÄ', desired: null, timer: null, patience: 100 },
        { id: 2, type: 'ü§ñ', desired: null, timer: null, patience: 100 },
        { id: 3, type: 'üëæ', desired: null, timer: null, patience: 100 },
        { id: 4, type: 'ü§µ', desired: null, timer: null, patience: 100 },
    ];
    const menu = ['üçî', 'üç∑', 'ü•ó', 'üç∫', 'üç∞'];
    
    // --- DOM ELEMENTS ---
    const scoreEl = document.getElementById('score');
    const logEl = document.getElementById('message-log');

    // --- UTILS ---
    function log(msg) {
        const div = document.createElement('div');
        div.className = 'log-entry';
        div.textContent = `> ${msg}`;
        logEl.prepend(div);
        if (logEl.children.length > 5) logEl.lastChild.remove();
    }

    function updateScore(val) {
        score += val;
        scoreEl.textContent = score;
        // Visual feedback on score change
        scoreEl.style.color = val > 0 ? '#0f0' : '#f00';
        setTimeout(() => scoreEl.style.color = '#0ff', 300);
    }

    // --- GAME LOGIC ---

    function startOrderingCycle() {
        setInterval(() => {
            // Pick a random guest who isn't ordering
            const availableGuests = guests.filter(g => g.desired === null);
            if (availableGuests.length > 0) {
                const guest = availableGuests[Math.floor(Math.random() * availableGuests.length)];
                const item = menu[Math.floor(Math.random() * menu.length)];
                
                guest.desired = item;
                showBubble(guest.id, item);
                log(`Guest ${guest.id + 1} wants ${item}`);

                // Patience timer
                guest.timer = setTimeout(() => {
                    if (guest.desired) {
                        // Failed to serve in time
                        guestAngry(guest);
                    }
                }, 8000); // 8 seconds to serve
            }
        }, 2500); // New order every 2.5 seconds
    }

    function showBubble(id, item) {
        const bubble = document.getElementById(`bubble-${id}`);
        bubble.textContent = item;
        bubble.classList.add('active');
    }

    function hideBubble(id) {
        const bubble = document.getElementById(`bubble-${id}`);
        bubble.classList.remove('active');
    }

    function serveItem(item) {
        // Check if any guest wants this item
        const hungryGuest = guests.find(g => g.desired === item);

        if (hungryGuest) {
            // Success
            clearTimeout(hungryGuest.timer);
            hungryGuest.desired = null;
            hideBubble(hungryGuest.id);
            
            // Visual success
            const guestEl = document.getElementById(`guest-${hungryGuest.id}`);
            const originalContent = guestEl.innerHTML;
            // Quick happy animation
            guestEl.style.transform = `${getComputedStyle(guestEl).transform} scale(1.2)`;
            setTimeout(() => {
                guestEl.style.transform = guestEl.style.transform.replace(' scale(1.2)', '');
            }, 200);

            updateScore(100);
            log(`Served ${item}! +100 Credits`);
        } else {
            // Mistake
            updateScore(-50);
            log(`Nobody ordered ${item}. Wasted!`);
            
            // Shake effect on UI
            const ui = document.getElementById('ui-layer');
            ui.style.transform = 'translateX(-50%) rotate(2deg)';
            setTimeout(() => ui.style.transform = 'translateX(-50%) rotate(0deg)', 100);
        }
    }

    function guestAngry(guest) {
        guest.desired = null;
        hideBubble(guest.id);
        updateScore(-200);
        log(`Guest ${guest.id + 1} left angry! -200 Credits`);
        
        const guestEl = document.getElementById(`guest-${guest.id}`);
        guestEl.style.filter = 'grayscale(100%)';
        setTimeout(() => guestEl.style.filter = 'none', 2000);
    }

    // --- INTERACTION ---
    function scanShip() {
        updateScore(50);
        log("Scanning ship... Class: Dreadnought. +50 Credits");
        const ship = document.getElementById('capital-ship');
        ship.style.filter = "drop-shadow(0 0 20px #0ff)";
        setTimeout(() => ship.style.filter = "drop-shadow(0px 10px 20px rgba(0,0,0,0.5))", 500);
    }

    // --- INITIALIZATION ---
    window.onload = () => {
        log("Welcome to Orbital Bistro.");
        log("Click food items to serve guests.");
        log("Don't let them wait too long!");
        startOrderingCycle();
        
        // Add some random particles to the portal
        const portal = document.getElementById('portal-window');
        for(let i=0; i<20; i++) {
            const p = document.createElement('div');
            p.className = 'portal-particle';
            const size = Math.random() * 3;
            p.style.width = size + 'px';
            p.style.height = size + 'px';
            p.style.top = Math.random() * 100 + '%';
            p.style.left = Math.random() * 100 + '%';
            p.style.opacity = Math.random();
            portal.appendChild(p);
        }
    };

</script>
</body>
</html>